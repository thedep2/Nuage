<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">

	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">


	<title>La Cartographie des Nuages</title>
	<link rel="icon" href="favicon.png">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">

	<link rel="stylesheet" href="styles/normalize.css">
	<script src="scripts/vendor/modernizr-2.8.3.min.js"></script>

	<link rel="stylesheet"
	href="bower_components/bootstrap/css/bootstrap.css">

	<link href='http://fonts.googleapis.com/css?family=Satisfy'
	rel='stylesheet' type='text/css'>
	<link
	href='http://fonts.googleapis.com/css?family=Josefin+Sans:400,600,700,400italic|Signika:400,600&amp;subset=latin,latin-ext'
	rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="styles/app.css">

<link href="js/lightbox2-master/dist/css/lightbox.css" rel="stylesheet">



	<!--[if lt IE 9]>
	<script src="scripts/html5shiv.js"></script>
	<![endif]-->



</head>
<body>

	<div id="galerie" style="text-align:left;" >



	</div>

	<script type="text/javascript" language="JavaScript" src="scripts/jquery-2.1.4.js"></script>

	<script type="text/javascript" language="JavaScript" src="bower_components/bootstrap/js/bootstrap.min.js"></script>
<script src="js/lightbox2-master/dist/js/lightbox.js"></script>

<script>
    lightbox.option({
      'positionFromTop': 25,
    })
</script>

	<script>
	jQuery(document).ready(function() {

		var tableauImages = [
			[1, 'https://lh3.googleusercontent.com/uOaKni06BJYBvXrvYwGwqZqRHy5HNiR8pf7vH8Aol8Nu', 2048, 1516, 'Ciao Marseille'],
			[2, 'https://lh3.googleusercontent.com/wsaG8rushqI0rFYTihsot4EvVflZTxry5qawpD28LUDJ', 2048, 1536, 'Ciao Marseille'],
			[3, 'https://lh3.googleusercontent.com/osd4QJZbJHqtP052mGaarCDYMc48_ZpeMUkjhKQIx8IH', 2048, 1536, 'Ciao Marseille'],
			[4, 'https://lh3.googleusercontent.com/o4vTXdi0bbLkP5LRGRWIZ337kSgF2IjgvxTZ4q76qFHM', 2048, 1153, 'Ciao Marseille'],
			[5, 'https://lh3.googleusercontent.com/NG1ftWY22s5T1wBq5N33qzKib529Q_NgNzU2MFiF0EmV', 2048, 1516, 'Ciao Marseille'],
			[6, 'https://lh3.googleusercontent.com/OUzNnDZSH3nWIMMilr-OMcFIuAm4z-I8xEDfechjZFvr', 1516, 2048, 'Ciao Marseille'],
			[7, 'https://lh3.googleusercontent.com/JCYgYeraAazmkWXc-iBUCRhMSCWbLsV4vTqjbnndjm5A', 2048, 1516, 'Ciao Marseille'],
			[8, 'https://lh3.googleusercontent.com/xoM97fUB2noS-tgKtdWfZbZKRLPn-IIInBXAx8suAbKy', 2048, 1152, 'Ciao Marseille'],
			[9, 'https://lh3.googleusercontent.com/40ufepG5sl0TnbRb17mC8EuPlbmOZyd6BounQDcQFmrc', 2048, 1357, 'Ciao Marseille'],
			[10, 'https://lh3.googleusercontent.com/Kra42zy8FNq7HATIzQ48qmF3n8yKD5MRWb2zsqqvPeVE', 2048, 895, 'Ciao Marseille'],
			[11, 'https://lh3.googleusercontent.com/k5AJL9aoqBHhl3JyYDUdr2eMO3Zi_zFtmTazBCLozCqo', 2048, 1357, 'Ciao Marseille'],
			[12, 'https://lh3.googleusercontent.com/hpaxfyR8xcRonTfg59DsvzlQBtiWK-sG00ss35yBwP2s', 2048, 814, 'Ciao Marseille'],
			[13, 'https://lh3.googleusercontent.com/bCjl78HkK_hXp2WA_Nu_gaGqDCRCD7t9_4T2yvJQo4L_', 2048, 1357, 'Ciao Marseille'],
			[14, 'https://lh3.googleusercontent.com/3IFyetectmkzAsAqe3SRxrSf_H3Pz4WaKdo5MVMq6HWe', 1536, 2048, 'Ciao Marseille'],
			[15, 'https://lh3.googleusercontent.com/mzTaHwz6msRIcSToB0GvEMrHaS2nO1WIV6lf8CkdK9vR', 2048, 1516, 'Ciao Marseille'],
			[16, 'https://lh3.googleusercontent.com/MU_KSiBlN8liPvb1o_JmAnzrCK7AfkG06F0V0xfRctg_', 1516, 2048, 'Ciao Marseille'],
			[17, 'https://lh3.googleusercontent.com/uXcf6h3dNRLZ9mXRmXxavmfsNEwCqSmDyQZ0xwAhk_4w', 2048, 1152, 'Ciao Marseille'],
			[18, 'https://lh3.googleusercontent.com/vafh96WmKkjvWPJ6cThIRFr1ERxfpGMtsw9ZTvya_6A_', 2048, 1357, 'Ciao Marseille'],
			[19, 'https://lh3.googleusercontent.com/kTFAyceeWzg6DHlDcDjmZ8Mb91FewYYjWAOJQ-Ir6USB', 2048, 1152, 'Ciao Marseille'],
			[20, 'https://lh3.googleusercontent.com/GNMB1JIjIjfrcCZFNZKIeCX4_cjXpr01ZGqecNgCiaaS', 2048, 1357, 'Ciao Marseille']

		];

		function calculTailleLigne() {
			var largeurFenetre = $(window).width();
			return Math.round(largeurFenetre - ((20+calculMarge())*2));
		}

		function calculMarge() {
			var largeurFenetre = $(window).width();
			var marge = 0;
			if (largeurFenetre <= 768) {
				marge =  10;
			} else if (768 < largeurFenetre && largeurFenetre <= 992) {
				marge =  15;
			} else if (992 < largeurFenetre && largeurFenetre <= 1200) {
				marge =  20;
			} else {
				marge =  25;
			}
			$('#galerie').css("padding", marge+"px");
			return marge;
		}

		function calculRatioLigne(tailleLigne) {
			if (tailleLigne <= 500) {
				return 0.7;
			} else if (500 < tailleLigne && tailleLigne <= 768) {
				return 1;
			} else if (768 < tailleLigne && tailleLigne <= 992) {
				return 2;
			} else if (992 < tailleLigne && tailleLigne <= 1200) {
				return 2.7;
			} else if (1200 < tailleLigne && tailleLigne <= 1800) {
				return 5;
			} else {
				return 7;
			}
		}

		function videGalerie() {
			$('#galerie').empty();
		}

		function rechargeImage() {

			videGalerie();

			var tailleLigne = calculTailleLigne();
			var RatioLigne = calculRatioLigne(tailleLigne);

			var tmpRatioLigne = 0;
			var bufferImage = [];
			var nbImageTmp = 0;
			var hauteurTotale = 0;
			var nbLigne = 0;

			for (var i = 0; i < tableauImages.length; i++) {
				var indexImg = tableauImages[i][0];
				var src = tableauImages[i][1];
				var longueur = tableauImages[i][2];
				var hauteur = tableauImages[i][3];
				var nom = tableauImages[i][4];

				var ratioImage = longueur/ hauteur;

				tmpRatioLigne = tmpRatioLigne + ratioImage;
				bufferImage.push(tableauImages[i]);

				if (tmpRatioLigne >= RatioLigne) {

					var longueurTotale = 0;

					for (var j = 0; j < bufferImage.length; j++) {
						longueurTotale += bufferImage[j][2];
					}

					var hauteurMax = Math.round(longueurTotale / tmpRatioLigne);

					var hauteurLigne = Math.round(hauteurMax * tailleLigne / longueurTotale);
					hauteurTotale += hauteurLigne;
					nbLigne += 1;

					for (var j = 0; j < bufferImage.length; j++) {

						var longueurImage = Math.round(bufferImage[j][2] * hauteurLigne / bufferImage[j][3]);

						var baliseImg = '<img    id="img'+bufferImage[j][0]+'" src="' + bufferImage[j][1] + '=h' + hauteurLigne + '"     >';

						var baliseLien = '<a href="' + bufferImage[j][1] + '=h' + bufferImage[j][3] + '" data-lightbox="image1" data-title="' + bufferImage[j][4] +'">' + baliseImg + '</a>';

						$('<div class="image" style="width:'+longueurImage+'px; height:'+hauteurLigne+'px;background-color:#DDD; margin:2px; margin-bottom:3px;" > ' + baliseLien + ' </div>').appendTo($('#galerie'));
					}

					tmpRatioLigne = 0;
					bufferImage = [];
					//data-image="' + bufferImage[j][1] + '=h' + bufferImage[j][3] + '"
				}

			}

			var hauteurLigne = Math.round(hauteurTotale / nbLigne);


			for (var j = 0; j < bufferImage.length; j++) {

				var baliseImg = '<img  id="img'+bufferImage[j][0]+'" src="' + bufferImage[j][1] + '=h' + hauteurLigne + '"     >';

				$('<div class="image"> ' + baliseImg + ' </div>').appendTo($('#galerie'));
			}


			$(".image").css("display", "inline-block");
			$("img").css("margin-bottom", "5px");



		}


		$(window).resize(function() {
			rechargeImage();

		});



		rechargeImage();
	});
	</script>
</body>
